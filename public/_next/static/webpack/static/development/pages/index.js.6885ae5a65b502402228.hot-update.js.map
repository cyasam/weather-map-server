{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.6885ae5a65b502402228.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import { Component } from 'react';\nimport { appReq, googleMapInit } from '../helpers';\n\nclass App extends Component {\n  state = {\n    map: null,\n    mapCenter: {\n      lat: 52.026,\n      lng: 15.0551,\n    },\n    cities: [\n      {\n        name: 'Ä°stanbul',\n        lat: 41.033606,\n        lng: 29.086941,\n      },\n      {\n        name: 'Berlin',\n        lat: 52.52,\n        lng: 13.405,\n      },\n      {\n        name: 'London',\n        lat: 51.5074,\n        lng: -0.1182,\n      },\n      {\n        name: 'Paris',\n        lat: 48.8622,\n        lng: 2.3638,\n      },\n      {\n        name: 'Milan',\n        lat: 45.4807,\n        lng: 9.1713,\n      },\n      {\n        name: 'Vienna',\n        lat: 48.2096,\n        lng: 16.4113,\n      },\n      {\n        name: 'Stockholm',\n        lat: 59.3309,\n        lng: 18.0809,\n      },\n      {\n        name: 'Oslo',\n        lat: 59.9114,\n        lng: 10.7325,\n      },\n      {\n        name: 'Moskow',\n        lat: 56.032514,\n        lng: 37.70615,\n      },\n      {\n        name: 'Warsaw',\n        lat: 52.2297,\n        lng: 21.0122,\n      },\n      {\n        name: 'Bucharest',\n        lat: 44.43895,\n        lng: 26.109011,\n      },\n      {\n        name: 'Riga',\n        lat: 57.027595,\n        lng: 24.048958,\n      },\n      {\n        name: 'Minsk',\n        lat: 54.264456,\n        lng: 27.512846,\n      },\n      {\n        name: 'Kyiv',\n        lat: 50.471672,\n        lng: 30.573538,\n      },\n    ],\n  };\n  componentDidMount() {\n    if (!this.state.map) {\n      googleMapInit()\n        .then(() => {\n          return this.onLoadGoogleMapsScript();\n        })\n        .then(responses => {\n          responses.forEach(response => {\n            const {\n              currently: { icon },\n              latitude,\n              longitude,\n            } = response.data;\n            this.createMarkers(latitude, longitude, icon);\n          });\n        });\n    }\n  }\n\n  createMarkers(lat, lng, icon) {\n    const iconBase = '/static/images/weather-icons';\n    const iconSize = {\n      width: 36,\n      height: 36,\n    };\n\n    const iconObj = {\n      url: `${iconBase}/${icon}.svg`,\n      scaledSize: new google.maps.Size(iconSize.width, iconSize.height),\n      anchor: new google.maps.Point(\n        iconSize.width / 2,\n        (iconSize.width / 2) * 3,\n      ),\n    };\n\n    // Create markers.\n    const marker = new google.maps.Marker({\n      position: new google.maps.LatLng(lat, lng),\n      icon: iconObj,\n      map: this.state.map,\n    });\n  }\n\n  onLoadGoogleMapsScript() {\n    const { mapCenter, cities } = this.state;\n    const { lat, lng } = mapCenter;\n\n    this.setState({\n      map: new google.maps.Map(document.getElementById('map'), {\n        center: { lat, lng },\n        zoom: 5,\n      }),\n    });\n\n    const promiseCities = cities.map(city => {\n      return appReq.get(`/get-weather?latlng=${city.lat},${city.lng}`);\n    });\n\n    return Promise.all(promiseCities);\n  }\n\n  render() {\n    return (\n      <div id=\"map-wrapper\">\n        <div id=\"map\" />\n        <style global jsx>\n          {`\n            html,\n            body,\n            #__next {\n              width: 100%;\n              height: 100%;\n              margin: 0;\n              padding: 0;\n            }\n            #map-wrapper,\n            #map {\n              display: flex;\n              width: 100%;\n              height: 100%;\n            }\n          `}\n        </style>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAxEA;AACA;;;;;;AA8EA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAHA;AACA;AASA;AACA;AACA;AACA;AAHA;AAKA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AADA;AAOA;AACA;AACA;AAEA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAsBA;;;;AArKA;AACA;AAuKA;;;;A","sourceRoot":""}